---
layout: post      # 수정 NO 
title: 7. 게시판만들기(UD) # 글 제목으로 수정
category: session # 본인에게 맞는 카테고리명을 적으세요
---

세션 7 - prod. 장윤서 

# 7th session

## contents
1. 글 삭제(delete) 기능 구현하기 
2. 글 수정(update) 기능 구현하기 



### 본격적 코딩!!

자 저번까지 글을 읽고(Read) 쓰는 (Create) 까지 해보았으니 이젠 쓴 글을 삭제하는 Delete 와 쓴 글의 내용을 수정하는 Update 기능을 구현해볼거에요 
먼저 Delete 부터 구현해봅시다    

views.py 
{% highlight html %}

def delete(request, blog_id):
//요청을 받을 때 blog_id 값을 넘겨 받고
    destroy = get_object_or_404(Blog, pk=blog_id)
//BLog 모델에서 앞의 blog_id 를 pk로 삼아서 그에 대한 특정 객체(하나의 게시물)를 찾고
//그 찾은 객체(하나의 게시물)을 destroy라는 변수에 담고
    destroy.delete()
//destroy에 담긴 객체(게시물)을 삭제한다
    return redirect('home')
//끝나면 바로 home이라는 url을 실행한다

{% endhighlight %}    

urls.py
{% highlight html %}

urlpatterns = [
		path('admin/', admin.site.urls),
		path('', blogapp.views.home, name="home"),
    path('blog/<int:blog_id>/', blogapp.views.detail, name='detail'),
    path('blog/new/', blogapp.views.new, name='new'),
    path('blog/create/', blogapp.views.create, name='create'),
    path('blog/delete/<int:blog_id>/', blogapp.views.delete, name='delete'),
    //blog/delete/(게시물번호)로 되어있는 url를 받으면, blogapp내의 views.py의 delete 함수를 실행하고, 이 url의 이름은 delete이다
]

{% endhighlight %}

home.html
{% highlight html %}
{%raw%}{% for blog in blogs.all %}
<div class="container">
    <a href="{% url 'detail' blog.id %}">
        <h1>{{ blog.title }}</h1>
    </a>
    <p>{{ blog.pub_date }}</p>
    <p>{{ blog.body }}</p>
</div>
<a href = "{% url 'delete' blog.id%}"> 삭제하기 </a>
{% endfor %}
<a href="{% url 'new' %}"> new post </a>
{%endraw%}{% endhighlight %}
